# Maintainer: Vladimir Tsanev <tsachev@gmail.com>
pkgname=python2-cassandra-driver
pkgver=1.0.1
pkgrel=1
pkgdesc="Python driver for Cassandra"
arch=('any')
url="https://github.com/datastax/python-driver"
license=('Apache')
makedepends=('git' 'python2-setuptools')
depends=('python2' 'libev' 'python2-futures' 'python2-scales' 'python2-blist')
optdepends=('libev' 'python2-lz4' 'python2-python-snappy')
checkdepends=('python2-nose' 'python2-mock' 'python2-ccm' 'python2-unittest2' 'python2-tox')
conflicts=('python2-cassandra-driver')
provides=('python2-cassandra-driver')
source=(git+https://github.com/datastax/python-driver.git)
md5sums=('SKIP')

pkgver() {
  cd $srcdir/python-driver
  # cutting off 'ccm-' prefix that presents in the git tag
  git describe --long | sed -r 's/([^-]*-g)/r\1/;s/-/./g'
}

check() {
    cd $srcdir/python-driver
	tox2
}

package() {
  cd $srcdir/python-driver
  python2 setup.py install --root=$pkgdir --optimize=1
}

# vim:set ts=2 sw=2 et:
